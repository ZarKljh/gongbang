TRUNCATE TABLE tbl_review RESTART IDENTITY CASCADE;
TRUNCATE TABLE tbl_review_report RESTART IDENTITY CASCADE;
TRUNCATE TABLE tbl_review_comment RESTART IDENTITY CASCADE;
-- 모든 데이터를 삭제하고 시퀀스를 1부터 시작


select * from tbl_review;
select * from tbl_review_report;
select * from tbl_review_comment;
select * from site_user;

SELECT * FROM TBL_REVIEW WHERE id = 1;

-- 댓글 권한 임시 허용
ALTER TABLE tbl_review_comment
ALTER COLUMN seller_id DROP NOT NULL;


INSERT INTO site_user (id, email, password, user_name, mobile_phone, nick_name, role, created_date, status)
VALUES
(1, 'hy@example.com', '123', '조현영', '010-1111-2222', '현영이', 'USER', NOW(), 'ACTIVE'),
(2, 'seller@example.com', '123', '조현영사업자', '010-1111-2222', '사업자', 'SELLER', NOW(), 'ACTIVE');


-- test data에서 임의로 PK id값을 정해주는게 아닌 생성 순서대로 id값을 정해주기 위함
SELECT setval(pg_get_serial_sequence('tbl_review', 'review_id'), COALESCE(MAX(review_id), 1), true) FROM tbl_review;

-- 리뷰
INSERT INTO tbl_review (order_id, order_item_id, product_id, user_id, rating, content, view_count, is_active, review_like, created_date, created_by)
VALUES
( 101, 501, 1001, 1, 5, '정말 예쁘고 향도 좋아요!', 12, TRUE, 3, NOW(), '현영1'),
( 102, 502, 1002, 2, 4, '배송이 빠르고 만족합니다.', 5, TRUE, 2, NOW(), '현영2'),
( 103, 503, 1003, 3, 5, '선물용으로 완전 추천!', 8, TRUE, 4, NOW(), '현영3'),
( 104, 504, 1004, 4, 3, '디자인은 예쁜데 포장이 조금 아쉬워요.', 6, TRUE, 1, NOW(), '현영4'),
( 105, 505, 1005, 5, 4, '가죽 퀄리티가 좋아요.', 10, TRUE, 3, NOW(), '현영5'),
( 106, 506, 1006, 6, 5, '향이 진짜 좋아요.', 11, TRUE, 2, NOW(), '현영6'),
( 107, 507, 1007, 7, 4, '디테일이 섬세하네요.', 7, TRUE, 1, NOW(), '현영7'),
( 108, 508, 1008, 8, 5, '선물했는데 너무 좋아했어요.', 14, TRUE, 5, NOW(), '현영8'),
( 109, 509, 1009, 9, 3, '색상이 화면이랑 달라요.', 4, TRUE, 0, NOW(), '현영9'),
( 110, 510, 1010, 10, 5, '비누 향이 은은해서 좋아요.', 9, TRUE, 2, NOW(), '현영10'),
( 111, 51, 101, 11, 5, '정말 예쁘고 향도 좋아요!', 12, TRUE, 3, NOW(), '현영11'),
( 112, 52, 102, 12, 4, '배송이 빠르고 만족합니다.', 5, TRUE, 2, NOW(), '현영12'),
( 113, 53, 103, 13, 5, '선물용으로 완전 추천!', 8, TRUE, 4, NOW(), '현영13'),
( 114, 54, 104, 14, 3, '디자인은 예쁜데 포장이 조금 아쉬워요.', 6, TRUE, 1, NOW(), '현영14'),
( 115, 55, 105, 15, 4, '가죽 퀄리티가 좋아요.', 10, TRUE, 3, NOW(), '현영15'),
( 116, 56, 106, 16, 5, '향이 진짜 좋아요.', 11, TRUE, 2, NOW(), '현영16'),
( 117, 57, 107, 17, 4, '디테일이 섬세하네요.', 7, TRUE, 1, NOW(), '현영17'),
( 118, 58, 108, 18, 5, '선물했는데 너무 좋아했어요.', 14, TRUE, 5, NOW(), '현영18'),
( 119, 59, 109, 19, 3, '색상이 화면이랑 달라요.', 4, TRUE, 0, NOW(), '현영19'),
( 120, 60, 110, 20, 5, '비누 향이 은은해서 좋아요.', 9, TRUE, 2, NOW(), '현영20');

-- 리뷰 신고 내역
INSERT INTO tbl_review_report (report_id, review_id, user_id, reason, resolved, created_at)
VALUES
(1, 4, 1, '욕설이 포함되어 있습니다.', FALSE, NOW()),
(2, 9, 2, '광고성 리뷰입니다.', FALSE, NOW()),
(3, 3, 5, '허위 정보 같습니다.', FALSE, NOW()),
(4, 8, 7, '도배성 글이에요.', FALSE, NOW()),
(5, 2, 8, '비속어 사용', TRUE, NOW()),
(6, 10, 9, '사진이 부적절합니다.', FALSE, NOW()),
(7, 7, 3, '스팸 리뷰입니다.', FALSE, NOW()),
(8, 6, 10, '욕설 포함 의심', FALSE, NOW()),
(9, 1, 4, '리뷰 내용이 부적절', TRUE, NOW()),
(10, 5, 6, '타인 비방 포함', FALSE, NOW());

-- 리뷰 댓글 내역
INSERT INTO tbl_review_comment (comment_id, review_id, seller_id, review_comment_content, created_at)
VALUES
(1, 1, 1, '좋은 후기 감사합니다 :)', NOW()),
(2, 2, 2, '이용해주셔서 감사해요!', NOW()),
(3, 3, 3, '마음에 드셨다니 다행이에요!', NOW()),
(4, 4, 4, '포장 관련 개선 중입니다.', NOW()),
(5, 5, 5, '가죽 관리법은 블로그에 올려둘게요!', NOW()),
(6, 6, 6, '향을 좋아해주셔서 감사해요 :)', NOW()),
(7, 7, 7, '자수공방 방문도 환영이에요!', NOW()),
(8, 8, 8, '그림 마음에 드셨다니 기뻐요!', NOW()),
(9, 9, 9, '컬러 옵션 관련 안내드리겠습니다.', NOW()),
(10, 10, 10, '비누 제작 영상도 참고해보세요 :)', NOW());

-- 사업자 정보
INSERT INTO seller (saller_id, user_id, saller_num, saller_name, saller_email, saller_phone, saller_address, saller_category, created_at)
VALUES
(1, 1, '2024-0001', '현영공방', 'hy_workshop@example.com', '02-111-1111', '서울 강남구 역삼동', '캔들', NOW()),
(2, 2, '2024-0002', '보검의목공소', 'bgwood@example.com', '02-222-2222', '서울 서초구 반포동', '목공', NOW()),
(3, 3, '2024-0003', '초코공예', 'chocoart@example.com', '02-333-3333', '서울 마포구 상수동', '공예', NOW()),
(4, 4, '2024-0004', '수아도자기', 'soo_ceramic@example.com', '02-444-4444', '서울 종로구 삼청동', '도자기', NOW()),
(5, 5, '2024-0005', '라이언가죽공방', 'lionleather@example.com', '02-555-5555', '서울 성동구 성수동', '가죽', NOW()),
(6, 6, '2024-0006', '나나의향초', 'nana_candle@example.com', '02-666-6666', '서울 강서구 화곡동', '향초', NOW()),
(7, 7, '2024-0007', '써니자수방', 'sunny_embroidery@example.com', '02-777-7777', '서울 동작구 사당동', '자수', NOW()),
(8, 8, '2024-0008', '민트아트샵', 'mintart@example.com', '02-888-8888', '서울 중구 신당동', '그림', NOW()),
(9, 9, '2024-0009', '소연패브릭', 'so_fabric@example.com', '02-999-9999', '서울 구로구 구로동', '패브릭', NOW()),
(10, 10, '2024-0010', '해리의비누방', 'harrysoap@example.com', '02-101-1010', '서울 노원구 공릉동', '비누', NOW());


-- postman 리뷰 등록(생성) 테스트용(json)
-- orderItemId는 uq이기 때문에 숫자 바꿔주기
{
  "orderId": 1,
  "orderItemId": 1,
  "productId": 1,
  "userId": 3,
  "rating": 5,
  "content": "첫 번째 테스트 리뷰 생성"
}

comment test data
{
  "review_id": 1,
  "review_comment_content": "이 상품은 향이 진하고 고객님께 잘 어울릴 것 같아요!"
}